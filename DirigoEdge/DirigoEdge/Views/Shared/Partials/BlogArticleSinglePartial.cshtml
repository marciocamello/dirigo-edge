@using DirigoEdge.Utils
@{

    int count = 0;
    foreach (var blog in Model)
    {
        count++;
        string evenOddClass = count % 2 == 0 ? "even" : "odd";
        
        // First blog should be full-width, the rest are stacked
        string columns = (count == 1 && !Request.IsAjaxRequest()) ? "twelve columns" : "six columns";
        
        <article class="blogArticle @evenOddClass @columns" data-id="@blog.BlogId">

            @{
                var blogAuthor = "Anonymous";
                var blogAuthorUrl = "#";
                if (blog.Author != "")
                {
                    blogAuthor = blog.Author;
                    blogAuthorUrl = blog.BlogAuthorUrl + "/" ?? "#";
                }
                if (!String.IsNullOrEmpty(blog.ImageUrl))
                {
                    <a href="/blog/@ContentUtils.GetFormattedUrl(blog.Title)/">
                        <img src="@blog.ImageUrl" alt="@blog.Title" />
                    </a>
                }
                else
                {
                    <a href="/blog/@ContentUtils.GetFormattedUrl(blog.Title)/">
                        <img src="/content/stockfeaturedimages/recordsplayer.jpg" alt="@blog.Title" />
                    </a>
                }
            }
            <h4><a href="/blog/@ContentUtils.GetFormattedUrl(blog.Title)/">@blog.Title</a></h4>
            
            <p class="byLine">Written by <a href="@blogAuthorUrl">@blogAuthor</a> in <a class="categoryLink" href="/blog/categories/@ContentUtils.GetFormattedUrl(blog.MainCategory)/">@blog.MainCategory</a></p>
            <p class="dateLine">@blog.Date.ToLongDateString()</p>
            
            <div class="row">
                <div class="userBlogContent twelve columns">
                    @Html.Raw(blog.ShortDesc)
                </div>
            </div>
        </article>
    }
}